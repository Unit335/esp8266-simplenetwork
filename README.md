Данное ПО является реализация сервера и клиента для плат ESP8266, обеспечивающих передачу данных между клиентами или от клиента к удаленному серверу. Для передачи данных внутри сети используются средства библиотеки ESP8266WiFi, передающая их в виде TCP пакетов. В макете нет потребности в высокой пропускной способности, но в реальных задач (например, для датчиков с необходимостью собирать детальную статистику) для большей эффективности может быть использован протокол UDP.
Для работы с удаленным сервером используется библиотека ESP8266HTTPClient. 

### Сервер
Плата сервера выполняет подключение к Wi-Fi сети, после чего циклично проверяет новые попытки подключения от устройств и поступление данных от них. В рассматриваемом макете сети у сервера присутствует максимум два клиента, т.е. клиентам нет необходимость определять адрес назначения.
IP сервера статический и задается в программе.

Дополнительно, функция message() может быть использована для передачи на удаленный сервер HTTP POST-запросом, в данном случае для адресации необходимо либо указать заранее определить адрес удаленного сервера, либо, если клиеенты могут отсылать данные на произвольные сервера, считывать его из полученных данных. 

Сервер принимает данные в формате JSON, для десериализации используется библиотека ArduinoJSON, при пересылке также используется JSON. Для демонстрации в программу включен разбор полученных данных по шаблону, но на практике для двух клиентских устройств десериализация используется только для проверки корректности полученных данных (при передаче данных на удаленный сервер также для чтения IP).

### Клиент
Клиентская плата при запуске подключается к Wi-Fi, после чего пытается подключиться к заранее известному IP сервера и циклично отправляет данные на сервер и проверяет на получение новых пакетов от него.

В макете платы не подключены ни к каким внешним устройствам и отправляют данные со случайно сгенерированным числом с задержкой в 8 сек на сервер. При получении данных производится их десериализация и вывод через UART.

Данные отправляются и принимаются в формате JSON, для сериализации/десериализации использована библиотека ArduinoJSON. Формат позволяет, в т.ч. при потребности в передаче больших объемов данных легко разделить их на два и более структур, но в таком случае обработка приема пакетов клиентами/удаленным сервером должна будет быть модифицирована для учета фрагментации данных.  

### Сеть с >2 клиентов

Для более крупных сетей и работы с удаленными серверами необходим метод адресации внутри сети. Т.к. IP клиентов в сети определяются динамически, заранее сопоставить функционал с адресами не представляется возможным.

Можно рассмотреть несколько вариантов решений: 

(1) внести изменения в авторизацию клиентов, при первом подключении отправляя сообщение с данными о роли устройства в сети. 
При этом сервер при подключении или отключении новых устройств должен сообщать всем клиентам о новом списке устройств.

(2) альтернативно, чтобы снизить нагрузку на клиентов (т.к. в таком случае им придется постоянно проверять ещё и на служебные пакеты с информацией о других устройствах), клиенты и сервер могут всегда использовать общую таблицу адресации, наличие устройства в сети и возможность отправки ему данных будет определяь сервер. 

(3) также можно использовать, аналогично серверу, статическую адресацию для клиентов. В данном случае заранее известно, на какой адрес клиент должен отправлять данные, хотя все ещё можно рассмотреть отправку информации о действительно имеющихся в сети устройствах клиентам.
Необходимость сообщения клиентам об имеющихся устройствах в сети определяется, в основном, частотой отправки ими информации - при отправляемых регулярно пакетах с несуществующим назначением будет возникать излишняя нагрузка и на сервер, и на клиент.
